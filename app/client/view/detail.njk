{% extends "common/layout.njk" %}

{% block header %}
<title>{{ detail.title }}</title>
{% endblock %}

{% block link %}
{{ super() }}
<link rel="stylesheet" href="/public/css/detail.css?rev=@@hash">
{% endblock %}

{% block content %}
<article class="container py-4">
    <h3 class="text-center">{{ detail.title }}</h3>
    <p class="text-center">
        <span class="badge badge-success">{{ helper.formatTab(detail.tab,detail.good,detail.top) }}</span>&nbsp;&nbsp;&nbsp;作者：{{detail.author.loginname}}&nbsp;&nbsp;&nbsp;发表于：{{helper.formatTime(detail.create_at)}}&nbsp;&nbsp;&nbsp;已读：{{detail.visit_count}}&nbsp;&nbsp;&nbsp;
    </p>
    <article class="jumbotron">
        <!--{{ helper.shtml(detail.content) }}-->
        {{ detail.content | safe }}
    </article>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand"><span class="align-middle">回复</span><i class="align-middle">({{ detail.reply_count }})</i></a>
    </nav>
    <article class="mt-3">
        <ul>
            {% for item in detail.replies %}
            <li class="border-bottom cnode-detail_replay d-flex p-3">
                <div class="cnode-detail_avatar mr-3 text-center">
                    <img src="{{ item.author.avatar_url }}" alt="" class="cnode-detail-avatar_img rounded mb-1">
                    <p class="text-truncate">{{ item.author.loginname }}</p>
                </div>
                {{ item.content | safe }}
            </li>
            {% endfor %}
        </ul>
    </article>
</article>
{% endblock %}

{% block script %}
{{ super() }}
<script></script>
{% endblock %}